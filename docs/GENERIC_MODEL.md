# Generic model

[Generic_model](../../../tree/master/pepiscms/application/models/Generic_model.php) is an extended Model that implements
[EntitableInterface](../../../tree/master/pepiscms/application/classes/EntitableInterface.php) required by
[FormBuilder](../../../tree/master/pepiscms/application/libraries/FormBuilder.php).

The `EntitableInterface` interface specifies the 3 basic methods: `saveById()`, `deleteById()` and `getById()`.
You can implement the `EntitableInterface` class by default but for most of the cases Generic_model with its helper
methods is more than enough â€“ in most situations Generic_model should only be extended. 

Generic_model also implements [AdvancedDataFeedableInterface](../../../tree/master/pepiscms/application/classes/AdvancedDataFeedableInterface.php)
interface that is needed by [DataGrid](../../../tree/master/pepiscms/application/libraries/DataGrid.php) component.

Methods of the generic model are worth to mention because they are present in all the models used by PepisCMS.

| Method name                                                                                                                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `setTable($table)`                                                                                                            | Sets table name on which the model will operate. Table name must be explicitly specified before the model is usable.                                                                                                                                                                                                                                                                                                                        |
| `setIdFieldName($idField)`                                                                                                    | Overwrites the name of the ID field. The default ID field is called id. Specify id field if your database table's id field is non standard (example personal_number).                                                                                                                                                                                                                                                                       |
| `setWhere($where_conditions)`                                                                                                 | Sets where conditions that will be used when obtaining the data for DataGrid. Where conditions should be of the same form as passed to the Database query object. The parameter must be an associative array where the keys specify the field names and the values are the desired values.                                                                                                                                                  |
| `setAcceptedPostFields($fields)`                                                                                              | Sets the list of accepted POST fields' names. The default saveById method accepts only fields that were previously defined as accepted. FormBuilder automatically sets the accepted post fields based on the defined inputs.                                                                                                                                                                                                                |
| `addAcceptedPostField($field)`                                                                                                | Appends accepted POST field. You can specify a single field (string) or a set of extra fields. This method is handy when you need to append the list of accepted fields once the model/form has been defined, for instance in a FormBuilder callback.                                                                                                                                                                                       |
| `applyFilters($db, $filters)`                                                                                                 | Static method that applies filters specified in the DataGrid format upon the specified DB object. This method is very usefull when you write your own getAdvancedFeed method and you want it to be compaible with the filers.                                                                                                                                                                                                               |
| `getById($id, $fields='*')`                                                                                                   | Returns instance of stdObject or FALSE                                                                                                                                                                                                                                                                                                                                                                                                      |
| `deleteById($id)`                                                                                                             | Deletes row by ID                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `saveById($id, $data_array)`                                                                                                  | Saves object in the database. If no $id is set, the object is inserted, when $id is set, the object is updated.  $data_array must be associative array and its keys must be previously registered by setAcceptedPostFields method!                                                                                                                                                                                                          |
| `move($id, $direction, $table=FALSE, $constraint_field_name=FALSE, $item_order_field_name='item_order', $id_field_name='id')` | This method is used to move elements of a list. It is used for changing the order of menu elements in page controller. Dont try to understand how it works, even for the author is looks like magic after some months. The following method takes all the items belonging to the same "group" (all items having the same value of constraint_field), moves the elements (swaps the item_order field) and normalizes the item_order values.  |
| `getDistinctAssoc($column, $table=FALSE, $pairs=FALSE)`                                                                       | Gets distinct values from a table's collumn. If table parameter is not specified, it will take it from the instance $table variable.You can predefine the return array by specifying $pairs.                                                                                                                                                                                                                                                |
| `getAssocPairs($key_collumn_name, $value_collumn_name, $table=FALSE, $imitial_array=FALSE, $possible_keys=FALSE)`             | Get an associative array build with keys found in $key_collumn_name collumn and values found in $value_collumn_name. You can specify the initial array as $imitial_array                                                                                                                                                                                                                                                                    |
| `generateTextId($text_id_field_name=FALSE, $length=FALSE, $prefix=FALSE, $suffix=FALSE, $table=FALSE)`                        | Generates random string ID that is checked for uniqueness. Random string IDs are used as tracking numbers and in other situations where giving the end user an order ID is not desired.                                                                                                                                                                                                                                                     |
| `setDatabase($database_group)`                                                                                                | Sets the database connection to be used by the model, database group must be defined in database config. Since 0.2.2                                                                                                                                                                                                                                                                                                                        |

Sometimes it is not desired to use the default Generic_model methods, for example when you need to obtain minimalistic
data set. [Generic_model](../../../tree/master/pepiscms/application/models/Generic_model.php) by default selects all
from your database using the "*" sign.